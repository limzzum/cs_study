# 1.5 디폴트 메서드와 자바 모듈

요즘은 외부에서 만들어진 컴포넌트를 이용해 시스템을 구축하는 경향이 있다. 관련해서 지금까지 자바에서는 특별한 구조가 아닌 평범한 자바 패키지 집합을 포함하는 JAR 파일을 제공하는 것이 전부였다.  
이런 상황 속, 패키지의 인터페이스를 바꾸려면 해당 인터페이스를 구현하는 클래스의 모든 구현을 바꿔야했던 어려움이 있었다.  
자바 8, 9는 이 문제를 다른 방법으로 해결한다.  

---
### 모듈 시스템  
자바 9의 모듈 시스템은 모듈을 정의하는 문법을 제공하므로, 이를 이용해 패키지 모음을 포함하는 모듈을 정의할 수 있다.  
이 덕분에 JAR 같은 컴포넌트에 구조를 적용할 수 있으며 문서화와 모듈 확인 작업이 용이해졌다.  

### 디폴트 메서드
인터페이스를 쉽게 바꿀 수 있도록 디폴트 메서드를 지원한다.  
실제로 개발자가 직접 디폴트 메서드를 구현하는 상황이 많진 않겠지만, 특정 프로그램을 구현하는 데 도움을 주는 기능이 아니라 **미래에 프로그램이 쉽게 변화할 수 있는 환경을 제공하는 기능**이다.  

만약 아래와 같이
```java
List<Apple> heavyApples = 
        box.stream().filter((Apple a) -> a.getWeight() > 150).collect(toList()); 
List<Apple> heavyApples = 
        box.parallelStream().filter((Apple a) -> a.getWeight() > 150).collect(toList());
``` 

stream 메서드가 포함된 코드를 자바 8 이전에서 실행하고 싶다면, 컬렉션 인터페이스에 stream 메서드를 추가하고 ArrayList 클래스에서 해당 메서드를 구현할 수 있을 것이다.  
하지만 그렇게 되면 Collection 인터페이스를 구현한 모든 클래스들이 stream 메서드를 구현해야하고 그것은 고통스럽다 ..  
그렇다면 어떻게 기존의 구현을 고치지 않고도 이미 공개된 인터페이스를 변경할 수 있을까?  

이런 배경으로 구현 클래스에서 구현하지 않아도 되는 메서드를 인터페이스에 추가하고 정의할 수 있는 ***디폴트 메서드*** 라는 기능이 나오게 되었다.   

```java
default void sort(Comparator<? super E> c) {
  Collections.sort(this, c);
}
```

따라서 자바 8 이전에는 List를 구현하는 모든 클래스가 sort를 구현해야했지만 자바 8부터는 디폴트 메서드가 있어 따로 구현할 필요가 없다.  